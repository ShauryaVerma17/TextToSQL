Questions 

    Alternatives to vanna? 

Vanna 

    Works well, when it works as expected

    Probably uses 3 separate vector indices for ddl, sql and documentation. Have seen 3 separate functions being called for retrieval 

    Doesn't work with Krutrim API and Ollama's local LLM running on my laptop is too weak/stupid for proper query generation, also have extraction issues in ollama's result for simpler queries 

Text To SQL 

    If the naming convention used in the user's DB is not proper then retrieval takes a hit and therefore incorrect queries will be generated 

    If using vanna we have to be careful and provide 2 separate options (1 for only generating queries, another for running queries (select only))

    The user should provide db access using a client that only has read (select queries) permissions. Any and all inserts, updates and deletes should be done by the user based on his jurisdiction of the query generated by us 

    Different DB types can have different ways of aquiring information schemas, ddls etc. So leave this to the user for niche DBs and automate for widely used ones? 


Making own SQL Agent 

    Backend : 

        Need a proper system prompt : 

            can take it from vanna 

            have to be careful of context window of LLM

        vector dbs : 

            1 for ddls, 1 for sql and 1 for documentation 

            Top K what is the K for each vector db
            
        LLM : 
            probably use krutrim for this poc

        Extraction of sql query from LLMs response

        Excecution of query logic (this will be different for different databases)

        If user tries to execute insert,update or delete query dont do it

        Plots of the results??? Vanna does it do we want it? Maybe for prod but unnecessary for POC

        Feedback from user (optional): 

            If user thinks the query was generated properly they can click on thumbs up and we will use the question and generated sql and add to vector DB
            
            Give the user to edit the query and choose to train the model with the edited query (Train here is just adding to vector db)

            If bad then don't add to vector db 

            So if a question and sql pair is already present simply return the sql from vector db? No human error has to be accounted for -> accidental thumbs up clicks or user doesn't know sql


    Frontend :

        Give the user a UI to train the vectorDB with custom sql queries, question and sql pairs, documents etc

        Option to just generate query

        Option to generate and execute query



